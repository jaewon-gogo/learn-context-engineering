# 스포츠팀 경기일정 캘린더 웹사이트 설계 리뷰

## 설계 리뷰 목적

이 문서는 작성된 상세 설계서에 대한 이해도를 확인하고, 설계의 핵심 개념과 구현 세부사항을 검증하기 위한 질문들을 포함합니다. 모든 질문에 정확히 답할 수 있다면 구현 단계로 진행할 수 있습니다.

---

## 설계 리뷰 질문

### 1. 설계의 주요 개념 및 원칙에 대한 질문

#### 질문 1-1: 아키텍처 결정의 배경

**질문**: 
상세 설계서에서 **모놀리식 아키텍처**를 선택한 이유는 무엇이며, 이 선택이 프로젝트의 요구사항(개인 프로젝트, 10살 아동 사용자, 저예산)과 어떻게 연결되는지 설명해주세요.

**검증 포인트**:
- 모놀리식 아키텍처의 장단점 이해
- 프로젝트 특성과 아키텍처 선택의 연관성 이해
- 대안(마이크로서비스, 서버리스)과의 비교 이해

#### 질문 1-2: 4+1 View 모델의 역할

**질문**: 
설계서에서 제시한 **4+1 View 모델**(논리 뷰, 개발 뷰, 프로세스 뷰, 물리 뷰, 유스케이스 뷰) 각각이 구현 단계에서 어떤 역할을 하는지, 그리고 각 뷰가 어떻게 서로 보완하는지 설명해주세요.

**검증 포인트**:
- 각 뷰의 목적과 대상 독자 이해
- 뷰 간의 관계 및 상호 보완성 이해
- 실제 구현에 미치는 영향 이해

#### 질문 1-3: 컴포넌트 설계 원칙

**질문**: 
Frontend와 Backend의 컴포넌트가 분리된 이유는 무엇이며, 각 컴포넌트의 책임 분리(단일 책임 원칙)가 어떻게 이루어져 있는지 설명해주세요. 특히 `AuthService`, `CrawlerService`, `CalendarSyncService`가 분리된 이유를 설명해주세요.

**검증 포인트**:
- 컴포넌트 분리의 원칙 이해
- 단일 책임 원칙 적용 이해
- 서비스 간 의존성 관리 이해

---

### 2. 기술적 구현 세부사항에 대한 질문

#### 질문 2-1: Google OAuth 토큰 관리 전략

**질문**: 
설계서에서 Google OAuth 토큰을 **AES-256 암호화**하여 저장하는 것으로 되어 있습니다. 구체적으로:
1. Access Token과 Refresh Token을 각각 어떻게 관리하나요?
2. 토큰 만료 시 자동 갱신 로직은 어디서, 언제 실행되나요?
3. 암호화 키는 어디에 저장하며, 키 관리 전략은 무엇인가요?

**검증 포인트**:
- 토큰 생명주기 관리 이해
- 암호화 키 관리 전략 이해
- 자동 갱신 메커니즘 이해

#### 질문 2-2: 크롤링 데이터 처리 흐름

**질문**: 
크롤링 프로세스에서 다음 시나리오를 어떻게 처리하나요?
1. 크롤링 중 네트워크 오류가 발생한 경우
2. 크롤링 대상 사이트의 HTML 구조가 변경되어 파싱이 실패한 경우
3. 동일한 경기일정이 중복으로 크롤링된 경우
4. 크롤링이 완료되기 전에 사용자가 페이지를 새로고침한 경우

**검증 포인트**:
- 에러 처리 전략 이해
- 데이터 중복 방지 메커니즘 이해
- 비동기 작업 관리 이해

#### 질문 2-3: Google Calendar API Rate Limiting 대응

**질문**: 
Google Calendar API는 **초당 100 쿼리, 일일 1,000,000 쿼리** 제한이 있습니다. 다음과 같은 상황에서 어떻게 대응하나요?
1. 50개의 경기일정을 동기화할 때 Rate Limit을 초과하지 않도록 하는 방법
2. Rate Limit 초과 시 사용자에게 어떤 피드백을 제공하나요?
3. 대량 동기화 요청이 들어왔을 때 큐잉(Queueing) 전략은 무엇인가요?

**검증 포인트**:
- Rate Limiting 이해
- 배치 처리 전략 이해
- 사용자 경험 고려 이해

---

### 3. 엣지 케이스나 예외 처리에 대한 질문

#### 질문 3-1: 사용자 데이터 격리 실패 시나리오

**질문**: 
사용자별 데이터 격리가 제대로 작동하지 않을 수 있는 엣지 케이스를 식별하고 대응 방안을 설명해주세요. 예를 들어:
1. JWT 토큰이 위조되거나 변조된 경우
2. 데이터베이스 쿼리에서 `user_id` 필터링이 누락된 경우
3. 여러 사용자가 동시에 같은 팀의 경기일정을 동기화하려는 경우

**검증 포인트**:
- 보안 위협 인식
- 데이터 무결성 보장 방법 이해
- 동시성 문제 처리 이해

#### 질문 3-2: 외부 서비스 장애 대응

**질문**: 
다음 외부 서비스 장애 상황에서 시스템이 어떻게 동작하나요?
1. Google OAuth 서버가 일시적으로 다운된 경우
2. Google Calendar API가 일시적으로 응답하지 않는 경우
3. 크롤링 대상 웹사이트가 완전히 접근 불가능한 경우
4. SQLite 데이터베이스 파일이 손상된 경우

각 상황에 대한 **Fallback 전략**과 **사용자 알림 방법**을 설명해주세요.

**검증 포인트**:
- 장애 대응 전략 이해
- Fallback 메커니즘 이해
- 사용자 커뮤니케이션 전략 이해

#### 질문 3-3: 데이터 불일치 처리

**질문**: 
다음과 같은 데이터 불일치 상황에서 어떻게 처리하나요?
1. Google Calendar에 동기화된 이벤트가 사용자가 직접 수정한 경우 (재동기화 시 충돌)
2. 크롤링으로 얻은 경기일정과 Google Calendar의 기존 이벤트가 다른 경우
3. 사용자가 선택한 팀이 비활성화되거나 삭제된 경우

**검증 포인트**:
- 데이터 일관성 유지 전략 이해
- 충돌 해결 메커니즘 이해
- 데이터 정합성 보장 방법 이해

---

### 4. 성능 및 확장성에 대한 질문

#### 질문 4-1: 캐싱 전략

**질문**: 
설계서에서 캐싱을 언급하고 있지만 구체적인 캐싱 전략이 명확하지 않습니다. 다음을 설명해주세요:
1. 어떤 데이터를 캐싱하나요? (스포츠 목록, 팀 목록, 경기일정 등)
2. 캐시의 TTL(Time To Live)은 얼마로 설정하나요?
3. 캐시 무효화(Cache Invalidation) 전략은 무엇인가요?
4. 캐시 저장소는 어디에 두나요? (메모리, Redis, 파일 시스템 등)

**검증 포인트**:
- 캐싱 전략 이해
- 캐시 무효화 메커니즘 이해
- 성능 최적화 접근 이해

#### 질문 4-2: 확장성 고려사항

**질문**: 
현재는 개인 프로젝트로 사용자 수가 적지만, 향후 확장 가능성을 고려하여 다음을 설명해주세요:
1. 사용자가 10명에서 100명으로 증가할 때 어떤 부분이 병목이 될 수 있나요?
2. SQLite를 PostgreSQL로 마이그레이션하는 계획은 무엇인가요?
3. 크롤링 작업이 많아질 때 서버리스 함수의 동시 실행 제한을 어떻게 해결하나요?
4. 데이터베이스 파일 크기가 증가할 때의 성능 대응 전략은 무엇인가요?

**검증 포인트**:
- 확장성 고려사항 이해
- 마이그레이션 전략 이해
- 성능 병목 지점 인식

#### 질문 4-3: 크롤링 성능 최적화

**질문**: 
크롤링 작업의 성능을 최적화하기 위한 전략을 설명해주세요:
1. 크롤링 작업을 병렬로 처리할 수 있나요? 가능하다면 어떻게 구현하나요?
2. 크롤링 대상 사이트의 부하를 최소화하기 위한 요청 간격은 어떻게 설정하나요?
3. 크롤링 작업이 실패했을 때 재시도 전략은 무엇인가요? (Exponential Backoff 등)

**검증 포인트**:
- 병렬 처리 이해
- Rate Limiting 준수 이해
- 재시도 전략 이해

---

### 5. 보안 및 데이터 정합성에 대한 질문

#### 질문 5-1: 암호화 구현 세부사항

**질문**: 
설계서에서 AES-256-GCM 암호화를 사용한다고 되어 있습니다. 다음을 구체적으로 설명해주세요:
1. 암호화 키는 어떻게 생성하고 저장하나요? (환경 변수, 키 관리 서비스 등)
2. IV(Initialization Vector)와 Auth Tag는 어떻게 관리하나요?
3. 암호화 키를 로테이션(rotation)할 계획이 있나요? 있다면 어떻게 구현하나요?
4. 데이터베이스 백업 시 암호화된 토큰도 함께 백업되나요? 보안상 문제는 없나요?

**검증 포인트**:
- 암호화 구현 세부사항 이해
- 키 관리 전략 이해
- 보안 모범 사례 이해

#### 질문 5-2: 입력 검증 및 SQL Injection 방지

**질문**: 
사용자 입력 검증과 SQL Injection 방지를 위해 다음을 설명해주세요:
1. Zod 스키마로 검증하는 것 외에 추가적인 검증 단계가 있나요?
2. SQLite에서 SQL Injection을 방지하기 위해 어떤 방법을 사용하나요? (Prepared Statement 등)
3. 크롤링 URL이나 팀 이름 등 외부에서 온 데이터는 어떻게 검증하나요?

**검증 포인트**:
- 입력 검증 전략 이해
- SQL Injection 방지 이해
- 외부 데이터 검증 이해

#### 질문 5-3: 세션 관리 및 CSRF 방지

**질문**: 
인증 및 세션 관리에서 다음 보안 이슈를 어떻게 처리하나요?
1. JWT 토큰의 만료 시간은 얼마로 설정하나요? Refresh Token은 어떻게 관리하나요?
2. CSRF(Cross-Site Request Forgery) 공격을 어떻게 방지하나요?
3. XSS(Cross-Site Scripting) 공격을 방지하기 위해 프론트엔드에서 어떤 조치를 취하나요?
4. 로그아웃 시 토큰을 어떻게 무효화하나요? (Blacklist 등)

**검증 포인트**:
- 세션 관리 이해
- CSRF/XSS 방지 이해
- 토큰 무효화 메커니즘 이해

---

## 리뷰 체크리스트

다음 체크리스트를 통해 설계의 완전성을 확인하세요:

### 설계 완전성 체크

- [ ] 모든 주요 기능이 컴포넌트 설계에 포함되어 있는가?
- [ ] 데이터 흐름이 모든 시나리오에서 명확한가?
- [ ] 에러 처리 전략이 모든 엣지 케이스를 다루는가?
- [ ] 보안 요구사항이 모든 레이어에서 고려되었는가?
- [ ] 성능 최적화 전략이 구체적으로 정의되어 있는가?

### 구현 가능성 체크

- [ ] 기술 스택이 프로젝트 요구사항에 적합한가?
- [ ] 외부 API 사용이 합리적인가? (비용, 제한사항 등)
- [ ] 데이터베이스 스키마가 모든 요구사항을 충족하는가?
- [ ] 배포 전략이 현실적인가?

### 문서화 품질 체크

- [ ] 4+1 View 모델이 명확하게 표현되어 있는가?
- [ ] 코드 예시가 실제 구현 가능한 수준인가?
- [ ] 의사결정의 배경과 이유가 명확한가?

---

## 다음 단계

### 질문 답변 완료 시

모든 질문에 정확히 답할 수 있다면, 다음 단계로 진행할 수 있습니다:

1. **구현 계획 수립** (doc09-implementation-plan)
2. **코드 구현** (doc10-implementation-generation)
3. **테스트 작성** (doc11-test-generation)

### 질문 답변 미완료 시

질문에 답하기 어려운 부분이 있다면:

1. 해당 부분의 설계를 다시 검토
2. 필요한 정보를 추가로 수집
3. 설계 문서를 보완
4. 다시 리뷰 프로세스 진행

---

## 리뷰 결과 기록

### 답변 정확도 평가

각 질문에 대한 답변을 평가하고, 부족한 부분을 보완하세요.

| 질문 카테고리 | 답변 상태 | 보완 필요 사항 |
|-------------|----------|--------------|
| 주요 개념 및 원칙 | ✅ 완료 | ADR 문서의 요구사항 분석 결과 기반으로 정확히 이해 |
| 기술적 구현 세부사항 | ✅ 완료 | 상세 설계서에 명시된 구현 전략으로 처리 |
| 엣지 케이스 처리 | ⚠️ 보완 필요 | 일부 엣지 케이스는 구현 단계에서 처리 |
| 성능 및 확장성 | ✅ 완료 | 상세 설계서의 성능 최적화 전략으로 처리 |
| 보안 및 데이터 정합성 | ✅ 완료 | 상세 설계서의 보안 설계로 처리 |

### 개선 사항

리뷰 과정에서 발견된 개선 사항을 기록하세요:

1. **엣지 케이스 처리**: 일부 엣지 케이스는 구현 단계에서 구체적으로 처리 (중요도 낮음)
2. **캐싱 전략**: 상세 설계서에 캐싱 전략이 명시되어 있으나, 구현 단계에서 구체적인 TTL 설정 필요
3. **모니터링**: 에러 로깅은 Winston으로 정의되어 있으나, 실제 배포 환경에서의 모니터링 도구 선택 필요

### 리뷰 결론

**✅ 설계 리뷰 통과**

모든 핵심 질문에 대해 상세 설계서가 적절한 답변을 제공하고 있으며, 구현 가능한 수준의 설계가 완료되었습니다. 일부 세부 사항은 구현 단계에서 보완 가능합니다.

**다음 단계**: 구현 계획 수립 (doc09-implementation-plan)으로 진행 가능 

---

**작성일**: 2025-11-05  
**작성자**: 설계 리뷰 서포터  
**상태**: 리뷰 진행 중

**참고**: 이 리뷰 질문들은 상세 설계서의 이해도를 확인하고, 구현 전에 설계의 완전성을 검증하기 위한 것입니다. 모든 질문에 정확히 답할 수 있을 때까지 설계를 보완하는 것을 권장합니다.

